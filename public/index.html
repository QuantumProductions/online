<html>
<head>
  <script src="socket.io-1.3.7.js"></script>
</head>
<body bgcolor="black">
<center>
  <div id="game_container">
  </div>
</center>
<script>
    var canvas = document.createElement("canvas");
    canvas.width = 600;
    canvas.height = 600;
    document.getElementById("game_container").appendChild(this.canvas); 

    var context = this.canvas.getContext('2d');

    var clearBG = function() {
      context.clearRect(0, 0, canvas.width, canvas.height);
      context.fillStyle = "black";
      context.fillRect(0,0, canvas.width, canvas.height);  
    }

    var drawPlayer = function(p) {
      context.lineWidth = 1;
      context.beginPath();
      context.moveTo(p.x - 3, p.y - 3);
      context.lineTo(p.x + 3, p.y + 3);
      context.strokeStyle = 'red';
      context.closePath();
      context.stroke();
    }

    

    var socket = io();
    socket.on('connect', function() {
      console.log("connected");
    });
    socket.on('player-positions', function(data) {
     clearBG();
      var keys = Object.keys(data);
      for (var i = 0; i < keys.length; i++) {
        var player = data[keys[i]];
        drawPlayer(player);
      }
      
    });
    // socket.on('update', function(data) {
    //   $('body').append('<p>' + JSON.stringify(data) + '</p>');
    // });
    // $(document).keydown(function(e) {
    //   socket.emit('update', e.which);
    // });
</script>
</body>
</html>
